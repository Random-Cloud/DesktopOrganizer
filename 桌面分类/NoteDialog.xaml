<Window x:Class="DesktopOrganizer.NoteDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Note" Height="320" Width="450"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None" 
        AllowsTransparency="True" 
        Background="Transparent"
        MouseLeftButtonDown="Window_MouseLeftButtonDown">

    <!-- 窗口资源：定义按钮的通用圆角样式 -->
    <Window.Resources>
        <Style x:Key="RoundedButtonStyle" TargetType="Button">
            <Setter Property="FontFamily" Value="Microsoft YaHei UI"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" CornerRadius="15" Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Opacity" Value="0.8"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Opacity" Value="0.6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <!-- 窗口主体：淡黄色背景 + 阴影 -->
    <Border CornerRadius="8" Background="#FFF9C4" BorderBrush="#E6E0B0" BorderThickness="1" Margin="10">
        <Border.Effect>
            <!-- 阴影效果 -->
            <DropShadowEffect BlurRadius="15" ShadowDepth="3" Opacity="0.3" Color="#444"/>
        </Border.Effect>

        <Grid Margin="15">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- 0: 标题行 -->
                <RowDefinition Height="*"/>
                <!-- 1: 文本内容 -->
                <RowDefinition Height="Auto"/>
                <!-- 2: 底部按钮 -->
            </Grid.RowDefinitions>

            <!-- 标题栏：日期 + 关闭按钮 -->
            <Grid Grid.Row="0" Margin="0,0,0,10">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <!-- 一个小装饰图标 -->
                    <Border Width="4" Height="16" Background="#FFB74D" CornerRadius="2" Margin="0,0,8,0"/>
                    <TextBlock x:Name="DateTitle" Text="2025年11月24日" 
                               Foreground="#5D4037" FontWeight="Bold" FontSize="16" FontFamily="Microsoft YaHei UI"/>
                </StackPanel>

                <!-- 右上角 X 关闭按钮 -->
                <Button Content="✕" HorizontalAlignment="Right" VerticalAlignment="Center"
                        Width="24" Height="24" Background="Transparent" BorderThickness="0" 
                        Foreground="#8D6E63" FontWeight="Bold" Click="Cancel_Click" Cursor="Hand"/>
            </Grid>

            <!-- 分隔线 -->
            <Separator Grid.Row="0" VerticalAlignment="Bottom" Background="#D7CCC8" Margin="0,5,0,0"/>

            <!-- 输入区域 -->
            <TextBox x:Name="NoteTextBox" Grid.Row="1" Margin="0,10,0,10"
                     Background="Transparent" BorderThickness="0"
                     FontFamily="Microsoft YaHei" FontSize="15" Foreground="#4E342E"
                     AcceptsReturn="True" TextWrapping="Wrap" 
                     VerticalScrollBarVisibility="Auto"
                     SelectionBrush="#FFCC80">
                <!-- 自定义模板去掉TextBox默认的边框和聚焦发光效果 -->
                <TextBox.Template>
                    <ControlTemplate TargetType="TextBox">
                        <ScrollViewer x:Name="PART_ContentHost"/>
                    </ControlTemplate>
                </TextBox.Template>
            </TextBox>

            <!-- 底部按钮区 -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,5,0,0">
                <!-- 取消按钮 -->
                <!--<Button Content="取消" Click="Cancel_Click" 
                        Width="80" Height="30" Margin="0,0,10,0"
                        Background="Transparent" BorderBrush="#8D6E63" BorderThickness="1" Foreground="#000000"
                        Style="{StaticResource RoundedButtonStyle}"/> -->
                <Button Click="Cancel_Click" 
                        Width="80" Height="30" Margin="0,0,10,0"
                        Background="Transparent" BorderBrush="#8D6E63" BorderThickness="1"
                        Style="{StaticResource RoundedButtonStyle}">
                    <TextBlock Text="取消" Foreground="Black"/>
                </Button>
                <!-- 保存按钮 -->
                <Button Content="保存" Click="Save_Click" 
                        Width="80" Height="30"
                        Background="#8D6E63" BorderThickness="0" Foreground="White"
                        Style="{StaticResource RoundedButtonStyle}"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>